---
title: "Rubbish Analysis"
author: "Alexander Kahanek"
date: "5/14/2020"
output: html_document
---

# Welcome

PROJECT IS UNDER CONSTRUCTION

Project uses R vizualization and Python scripting together

Libraries and reading in clean data csv file

Note: DAYS = Baseline audit, monday preparty, SG day 1, and SG day 2

```{r, warning=FALSE, message=FALSE}
knitr::opts_chunk$set(warning=FALSE, message=FALSE)

####### ALL LIBRARIES USED ###########
options(stringsAsFactors = FALSE)
library(dplyr)
library(reticulate) # for python code
######################################

source_python("euclidean_script.py") # load in python script

raw <- read.csv('clean/clean_rubbish.csv') # load in cleaned data
```

# Analysis

Checking distribution of rubbishTypes

```{r}
raw %>% 
  subset(city == 'Redwood City') %>%
  group_by(rubbishType) %>% 
  summarise(
    num_litter = n()
  ) %>% 
  arrange(-num_litter)
```

# Clustering

Restrooms are not needed, they will not be passed through the script

```{r}
# setup to get all types
collection = c('trashCan', 'recyclingCan', 'tobaccoAshCan')
litter = c('paper', 'tobacco', 'plastic', 'unknown', 'food', 'glass')


clustered_data <- raw %>% 
  subset(city == 'Redwood City') %>% 
  get_euclidean(collection, litter) # python function

clustered_data %>% 
  head()
```

Checking each collection object details

```{r}
clustered_data %>% 
  subset(obj_id != -1) %>% # only want objects
  group_by(closest_cent) %>% 
  summarise(
    cent_type = max(cent_type),
    num_litter = n(),
    mean_dist = mean(distance),
    median_dist = median(distance),
    sd_dist = sd(distance),
    max_dist = max(distance),
  ) %>% 
  arrange(-num_litter)
```

Checking collection type details

```{r}
clustered_data %>% 
  subset(obj_id != -1) %>% # only want objects
  group_by(cent_type) %>% 
  summarise(
    num_litter = n(),
    mean_dist = mean(distance),
    median_dist = median(distance),
    sd_dist = sd(distance),
    max_dist = max(distance),
  ) %>% 
  arrange(-num_litter)
```

```{r}

```




