---
title: "Rubbish Analysis"
author: "Alexander Kahanek"
date: "5/14/2020"
output: html_document
---

Project uses R vizualization and Python scripting together


```{r, warning=FALSE, message=FALSE}
knitr::opts_chunk$set(warning=FALSE, message=FALSE)

####### ALL LIBRARIES USED ###########
options(stringsAsFactors = FALSE)
library(dplyr)
library(reticulate) # for python code
######################################

source_python("euclidean_script.py") # load in python script

raw <- read.csv('clean/clean_rubbish.csv') # load in cleaned data
```

Baseline audit, monday preparty, SG day 1, and SG day 2


```{r}
# setup to get all types
collection = c('trashCan', 'recyclingCan', 'tobaccoAshCan')
litter = c('paper', 'tobacco', 'plastic', 'unknown', 'food', 'glass')

# call python script
clustered_data <- raw %>% 
  subset(city == 'Redwood City') %>% 
  get_euclidean(collection, litter)

clustered_data %>% 
  head()
```


```{r}
clustered_data %>% 
  subset(obj_id != -1) %>% # only want objects
  group_by(closest_cent) %>% 
  summarise(
    num_litter = n(),
    mean_dist = mean(distance),
    median_dist = median(distance),
    sd_dist = sd(distance),
    max_dist = max(distance),
  ) %>% 
  arrange(-num_litter)
```


```{r}
clustered_data %>% 
  subset(obj_id != -1) %>% # only want objects
  group_by(cent_type) %>% 
  summarise(
    num_litter = n(),
    mean_dist = mean(distance),
    median_dist = median(distance),
    sd_dist = sd(distance),
    max_dist = max(distance),
  ) %>% 
  arrange(-num_litter)
```



```{r}
raw %>% 
  subset(is_litter == 1) %>%
  subset(city == 'Redwood City') %>%
  group_by(rubbishType) %>% 
  summarise(
    count = n()
  ) %>% 
  arrange(-count)
```


```{r}
clustered_data %>% 
  subset(is_litter == 1) %>% 
  group_by(rubbishType) %>% 
  summarise(
    count = n()
  ) %>% 
  arrange(-count)
```


```{r}

```




